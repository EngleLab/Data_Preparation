[["index.html", "EngleLab: Data Preparation Introduction", " EngleLab: Data Preparation Jason Tsukahara Introduction This is a guide on how to perform the data preparation steps. There are four chapters covering each of the steps and an additional chapter for pupil/eye-tracking data. Navigate the Chapters from the left-sidebar. Before we can start even looking at the data there are some preparatory steps that need to happen. Data Preparation starts out with messy raw data files for each individual subject spread across all the computers and ends with tidy raw data files (that are easy to work with) with data from all subjects merged into one file for each task. The four data preparation steps are: Organize the raw data files Merge the individual .edat files into a single task.emrg file using E-Merge Export the task.emrg file to a task.txt file so we can process the data in R Tidy the raw data files by running the 0_task_raw.R Scripts All the data files related to the study will be in the Z Drive at: Z: Backup Data / [StudyName] / Data Files / "],["organize.html", "1 Organize", " 1 Organize The first step in data preparation is simply about organizing the raw data files so that we can more easily merge the data files using E-Merge. Initially the data files are stored on separate computers along with the task program and stimulus materials. For each task we need to grab only the data files from each computer and put them into a single folder for that task. Because we have many tasks and computers, manually doing this can be quite tedious and error prone. I have created R scripts that you can run on each running room computer to copy the data files for each task to the Z drive. Connect the computer to the internet Do this by plugging in the yellow ethernet cord Connect to the Z Drive There should be a shortcut to a Z: Drive folder on the Desktop. If you can open that shortcut then the Z Drive is connected. Otherwise it might prompt you to provide credentials. A Grad Student or Post-Doc will have to put in their GT username and password. Run the R script. In the study folder on the Desktop there should be an R script file (copy_to_zdrive.R). Run the file by double-clicking on it. A command prompt window should open up and you should see the output of the script being printed. When the R script is finished running (it may take a while especially for eye-tracking data) the command prompt window will close. Unplug the computer from the internet Repeat steps 1-4 for each running room computer. "],["merge.html", "2 Merge", " 2 Merge The second step in data preparation is to merge the individual .edat files into a single .emrg file. The individual subject data files are located on the Z Drive: Z:/Backup Data/[STUDY NAME]/Data Files/Subject Files/[Task Name] You need to save the merged data files on the Z Drive at: Data Files/Merged Open E-Merge 3.0 by clicking on the icon in the taskbar. In the left window pane, navigate to the directory: Z: Backup Data / [StudyName] / Data Files / Subject Files Click on the [Task Name] folder. This should populate the right window pane with .edat files Select all the files (Ctrl + A) Click on Merge in the toolbar above Select Standard Merge A finder window will pop up asking you Save the merged data file Save the new merged data file with the same name as the [Task Name] folder. Save it to: Z: Backup Data / [StudyName] / Data Files / Merged If there is no merged file for this task yet, it will ask you if you want to create this file. Select “Yes”. Get a Graduate Student or PostDoc if an error message occurs Repeat steps 3 - 9 for each task folder The directory tree in the left window pane may have disappeared. To make it reappear, adjust the horizontal size of the window panes by moving your mouse cursor to the divider between the left and right window panes. You should now see E-Merged files for each task located in Data Files / Merged. "],["export.html", "3 Export", " 3 Export The third step in the data preparation stage is to Export the .emrg to a .txt file so it can be imported into R. Before we can do so we will need to copy the E-Prime merged files from the Z: drive over to SharePoint. This is only because exporting the files takes considerably longer on the Z: drive than SharePoint. Copy all the E-Prime Merged data files over to SharePoint: Georgia Institute of Technology / Engle Lab - Documents / Data Collection / [Study Name] / Data Files / Merged Open an E-Merged data file Go to File -&gt; Export… Change the following options Unicode: Uncheck Select Okay Save with the same file name and location as the E-Merge file Data Files / Merged If there is already an exported .txt file for this task then overwrite it. Repeat steps 2 - 6 for each task "],["tidy.html", "4 Tidy", " 4 Tidy The final data preparation step is to tidy the raw data files by sourcing the task_raw.R scripts. These scripts convert the messy task.txt files to tidy task_raw.csv files. A masterscript for this step should be created already, if not then get a graduate student to help out (Jason Tsukahara) Open the research study’s RProject file (.Rproj) located at: Georgia Institute of Technology / Engle Lab - Documents / Data Collection / [Study Name] / [StudyName].Rproj Do not open RStudio by clicking on the Program Application in the taskbar Open the file masterscript.R Use the File Window pane in RStudio (in the bottom right quadrant) to find the masterscript file Run the lines of code in the masterscript that start with source() by clicking anywhere on the first line of code and press Ctrl+Enter Make sure no error messages occur (these will be printed in the console window). Warning messages are okay. Repeat Steps 3 and 4 for each source() line of code. There should now be a _raw.csv file for each task located in the Data Files folder "],["pupil-data.html", "5 Pupil Data", " 5 Pupil Data There are a few extra Data Preparation steps required for pupil data. After completing Step 1 of data preparation follow these instructions. These instructions replace Steps 2 and 3. The eyetracker will create several data files that we need to import into BeGaze analysis software and export as a .txt file. The following data files are created by the eyetracker .idf - this file contains the actual gaze and pupil data AccuracyImage.bmp - An image file TrackingMonitorImage.bmp - An image file .idf_images - These files will look like folders. We do not need to import these files These files are located in the directory: Data Files/Eye-Tracking/[Task Name]/idf We will export the raw sample.txt files to: Data Files/Eye-Tracking/[Task Name] Open data files in BeGaze File -&gt; Manual Experiment Creation Experiment Name: PupilData Go to the Gaze Data tab: Add files… -&gt; Sort by Data -&gt; select the .idf files you want (not .idf_images) -&gt; Open Check if any subject files have a different recording frequency (Hz) or different calibration screen resolution (e.g. [860,720]) -Select those subject files and click “Remove Files” On the computer in the idf folder, move all the files associated with those subjects to a “recording error” folder: Data Files/Eye-Tracking/[Task Name]/idf/recording error Check that all subjects have the same recording frequency (Hz) and calibration screen resolution. Go to Stimulus Images tab: Add Files… -&gt; Sort by Date -&gt; select the AccuracyImage.bmp and TrackingMonitorIMage.bmp files you want (not .idf_images) Go to Event Detection tab: Set Event Detection to: High Speed Set the following parameters: 22 40% 50 ms 20% 80% Select Create Experiment Convert .idf files to .txt files Export -&gt; Legacy: Export Raw Data to File… The following fields should be selected (Fields with an * are the most important) Raw Data: Pupil Diameter Pupil Diameter [mm] * Channel: Left Eye * Right Eye * Points of Regard (POR): Gaze Position * Quality Values Eye Position Gaze Vector Misc. Data: Messages * Event Info * Stimulus Stimulus Conditions Select Details tab Select Write header Decimal places: 4 Separator: Tab Export Location: NEEDS TO BE SPECIFIED!! Browse: Data Files/Eye-Tracking/[Task Name] Select Single file output Select Export Go to File -&gt; Close Experiment Got to File -&gt; Delete Experiment from Data Base Delete PupilData Experiment Repeat steps 1 - 2 for each eye-tracking task "]]
