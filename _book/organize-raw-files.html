<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>EngleLab: Data Preparation</title>
  <meta name="description" content="This is a useR Guide for the EngleLab">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="EngleLab: Data Preparation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a useR Guide for the EngleLab" />
  <meta name="github-repo" content="EngleLab" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="EngleLab: Data Preparation" />
  
  <meta name="twitter:description" content="This is a useR Guide for the EngleLab" />
  

<meta name="author" content="Jason Tsukahara">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="merge.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">EngleLab Data Preparation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="organize-raw-files.html"><a href="organize-raw-files.html"><i class="fa fa-check"></i><b>1</b> Organize Raw Files</a><ul>
<li class="chapter" data-level="1.1" data-path="organize-raw-files.html"><a href="organize-raw-files.html#before-finishing-data-collection"><i class="fa fa-check"></i><b>1.1</b> Before Finishing Data Collection</a></li>
<li class="chapter" data-level="1.2" data-path="organize-raw-files.html"><a href="organize-raw-files.html#after-data-collection"><i class="fa fa-check"></i><b>1.2</b> After Data Collection</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="merge.html"><a href="merge.html"><i class="fa fa-check"></i><b>2</b> Merge</a></li>
<li class="chapter" data-level="3" data-path="export.html"><a href="export.html"><i class="fa fa-check"></i><b>3</b> Export</a></li>
<li class="chapter" data-level="4" data-path="source-r-scripts.html"><a href="source-r-scripts.html"><i class="fa fa-check"></i><b>4</b> Source R Scripts</a><ul>
<li class="chapter" data-level="4.1" data-path="source-r-scripts.html"><a href="source-r-scripts.html#creating-r-scripts"><i class="fa fa-check"></i><b>4.1</b> Creating R Scripts</a></li>
<li class="chapter" data-level="4.2" data-path="source-r-scripts.html"><a href="source-r-scripts.html#using-the-masterscript.r"><i class="fa fa-check"></i><b>4.2</b> Using the masterscript.R</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pupil-data.html"><a href="pupil-data.html"><i class="fa fa-check"></i><b>5</b> Pupil Data</a><ul>
<li class="chapter" data-level="5.1" data-path="pupil-data.html"><a href="pupil-data.html#using-begaze"><i class="fa fa-check"></i><b>5.1</b> Using BeGaze</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://englelab.gatech.edu/labuser" target="blank">Lab User</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EngleLab: Data Preparation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="organize-raw-files" class="section level1">
<h1><span class="header-section-number">1</span> Organize Raw Files</h1>
<hr />
<p>The Four Data Preparation Steps</p>
<ol style="list-style-type: decimal">
<li><p><strong>Organize the raw data files</strong>. This involves moving the raw <em>.edat</em> files from <em>Tasks/Session #/#. Task/data</em> to <em>Data Files/edat/Task/</em>.</p></li>
<li><p><strong>Merge</strong> the individual <em>.edat</em> files into a single <strong>task.emrg</strong> file using <em>E-Merge</em></p></li>
<li><p><strong>Export</strong> the <strong>task.emrg</strong> file to a <strong>task.txt</strong> file so we can process the data in <strong>R</strong></p></li>
<li><p><strong>Source</strong> the <strong>0_task_raw.R</strong> <em>Scripts</em></p></li>
</ol>
<hr />
<p>The first step in data preparation is just about organizing the raw data files so that we can more easily merge the data files using E-Merge.</p>
<p>This document shows you how to perform step 1 using a convenient function in R (instead of doing it manually)</p>
<p>To perform this first step, you can use the <code>copy_raw()</code> function from the <code>workflow</code> package I developed.</p>
<ol style="list-style-type: decimal">
<li><p>Open the research study’s RProject file (<strong>.Rproj</strong>)</p></li>
<li><p>Use <code>workflow::copy_raw()</code></p>
<p>You can just copy and paste from the examples below.</p>
<p>But for your information, the arguments you can specify for this function are:</p>
<ul>
<li><p><strong>from</strong>: a directory where the task folders for a single session are located (e.g. <strong>“Tasks/Session 1”</strong>)</p></li>
<li><p><strong>to</strong>: a directory where raw data files are to be copied to (e.g. <strong>“Data Files/subj”</strong>)</p></li>
<li><p><strong>filetype</strong>: a string pattern identifying a specific type of raw data file (e.g. <strong>“.edat”</strong>)</p></li>
<li><p><strong>remove</strong>: An optional argument that takes TRUE/FALSE values. FALSE is equivalent to copy/paste and is the default. TRUE will delete the files after copying them (this would be done only after data collection)</p></li>
<li><p><strong>subj.file</strong>: A file path to a list of subjects who completed the entire study (optional; and would only be specified after data collection; e.g. <strong>“Data Files/subj_completed.csv”</strong>)</p></li>
<li><p><strong>ext</strong>: a directory extension within the <strong>[Task Name]</strong> folder to save raw data files to (this is mainly for eye-tracking data; e.g. <strong>“idf”</strong>)</p></li>
</ul></li>
</ol>
<div id="before-finishing-data-collection" class="section level2">
<h2><span class="header-section-number">1.1</span> Before Finishing Data Collection</h2>
<p>In situations where data collection has not finished, you do not need to worry about removing subjects that did not complete all sessions. And this organization is more temporary so we will want to just copy/paste the files, not remove them.</p>
<p>To copy and paste the <strong>.edat</strong> files from a Session folder type into the console:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">workflow<span class="op">::</span><span class="kw">copy_raw</span>(<span class="dt">from =</span> <span class="st">&quot;Tasks/Session 1&quot;</span>, <span class="dt">to =</span> <span class="st">&quot;Data Files/subj&quot;</span>, </a>
<a class="sourceLine" id="cb1-2" title="2">                   <span class="dt">filetype =</span> <span class="st">&quot;.edat&quot;</span>)</a></code></pre></div>
<p><em>Note that you should be able to just copy and paste this line of code directly into R.</em></p>
<p>In order to copy and paste files from another Session folder, just replace <strong>Session 1</strong> with the name of another Session folder (e.g. <strong>Session 2</strong>)</p>
<p>To copy and paste <strong>Eye-Tracking</strong> data files from a Session folder type into the console:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">workflow<span class="op">::</span><span class="kw">copy_raw</span>(<span class="dt">from =</span> <span class="st">&quot;Tasks/Session 1&quot;</span>, <span class="dt">to =</span> <span class="st">&quot;Data Files/Eye-Tracking&quot;</span>, </a>
<a class="sourceLine" id="cb2-2" title="2">                   <span class="dt">filetype =</span> <span class="st">&quot;.idf&quot;</span>, <span class="dt">ext =</span> <span class="st">&quot;idf&quot;</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4">workflow<span class="op">::</span><span class="kw">copy_raw</span>(<span class="dt">from =</span> <span class="st">&quot;Tasks/Session 1&quot;</span>, <span class="dt">to =</span> <span class="st">&quot;Data Files/Eye-Tracking&quot;</span>,</a>
<a class="sourceLine" id="cb2-5" title="5">                   <span class="dt">filetype =</span> <span class="st">&quot;AccuracyImage&quot;</span>, <span class="dt">ext =</span> <span class="st">&quot;idf&quot;</span>)</a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7">workflow<span class="op">::</span><span class="kw">copy_raw</span>(<span class="dt">from =</span> <span class="st">&quot;Tasks/Session 1&quot;</span>, <span class="dt">to =</span> <span class="st">&quot;Data Files/Eye-Tracking&quot;</span>,</a>
<a class="sourceLine" id="cb2-8" title="8">                   <span class="dt">filetype =</span> <span class="st">&quot;TrackingMonitorImage&quot;</span>, <span class="dt">ext =</span> <span class="st">&quot;idf&quot;</span>)</a></code></pre></div>
<p>These three lines of code copy over three types of <strong>Eye-Tracking</strong> files.</p>
</div>
<div id="after-data-collection" class="section level2">
<h2><span class="header-section-number">1.2</span> After Data Collection</h2>
<p>In situations where data collection has finished, you will need to separate files for subjects that did complete all Sessions and subjects that did not. We will also want to just perform a <em>Move</em> and not <em>Copy and Paste</em>. This is a tedious process if done manually. We can just use <code>workflow::copy_raw()</code> to do this for us.</p>
<p>However, we do need to create a certain file before we can use <code>workflow::copy_raw()</code>. This file only contains a column of <strong>Subject #’s</strong> that completed all sessions. I suggest creating this file based on the <strong>Database</strong> on the Control Room Computer. Put the Subject #’s in an Excel document and save it as a comma separative value file, <strong>subjlist_final.csv</strong> to <strong>Data Files/</strong></p>
<p>Then type into the console:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">workflow<span class="op">::</span><span class="kw">copy_raw</span>(<span class="dt">from =</span> <span class="st">&quot;Tasks/Session 1&quot;</span>, <span class="dt">to =</span> <span class="st">&quot;Data Files/subj&quot;</span>, </a>
<a class="sourceLine" id="cb3-2" title="2">                   <span class="dt">filetype =</span> <span class="st">&quot;.edat&quot;</span>, <span class="dt">remove =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb3-3" title="3">                   <span class="dt">subj.file =</span> <span class="st">&quot;Data Files/subjlist_final.csv&quot;</span>)</a></code></pre></div>
<p>For <strong>Eye-Tracking</strong> files:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">workflow<span class="op">::</span><span class="kw">copy_raw</span>(<span class="dt">from =</span> <span class="st">&quot;Tasks/Session 1&quot;</span>, <span class="dt">to =</span> <span class="st">&quot;Data Files/Eye-Tracking&quot;</span>, </a>
<a class="sourceLine" id="cb4-2" title="2">                   <span class="dt">filetype =</span> <span class="st">&quot;.idf&quot;</span>, <span class="dt">ext =</span> <span class="st">&quot;idf&quot;</span>, <span class="dt">remove =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb4-3" title="3">                   <span class="dt">subj.file =</span> <span class="st">&quot;Data Files/subjlist_final.csv&quot;</span>)</a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5">workflow<span class="op">::</span><span class="kw">copy_raw</span>(<span class="dt">from =</span> <span class="st">&quot;Tasks/Session 1&quot;</span>, <span class="dt">to =</span> <span class="st">&quot;Data Files/Eye-Tracking&quot;</span>,</a>
<a class="sourceLine" id="cb4-6" title="6">                   <span class="dt">filetype =</span> <span class="st">&quot;AccuracyImage&quot;</span>, <span class="dt">ext =</span> <span class="st">&quot;idf&quot;</span>, <span class="dt">remove =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb4-7" title="7">                   <span class="dt">subj.file =</span> <span class="st">&quot;Data Files/subjlist_final.csv&quot;</span>)</a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9">workflow<span class="op">::</span><span class="kw">copy_raw</span>(<span class="dt">from =</span> <span class="st">&quot;Tasks/Session 1&quot;</span>, <span class="dt">to =</span> <span class="st">&quot;Data Files/Eye-Tracking&quot;</span>,</a>
<a class="sourceLine" id="cb4-10" title="10">                   <span class="dt">filetype =</span> <span class="st">&quot;TrackingMonitorImage&quot;</span>, <span class="dt">ext =</span> <span class="st">&quot;idf&quot;</span>, <span class="dt">remove =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb4-11" title="11">                   <span class="dt">subj.file =</span> <span class="st">&quot;Data Files/subjlist_final.csv&quot;</span>)</a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="merge.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

</body>

</html>
